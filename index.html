<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <title>Partido de Fútbol Sala</title>
  <style>
    #campo {
      background-image: url('futsal_field_background.jpeg'); /* Fondo del campo */
      width: 740px;
      height: 529px;
      position: relative;
      margin: 20px auto;
      border: 2px solid #333;
    }
    .jugador {
      font-family: 'Roboto', sans-serif; /* Usar la fuente Roboto */
      width: 80px;
      height: 80px;
      background-image: url('camiseta.png'); /* Imagen de camiseta */
      background-size: cover;
      text-align: center;
      color: white;
      position: absolute;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-weight: bold;
    }
    .numero {
      font-size: 18px;
      font-weight: bold; /* Hacer el número más prominente */
      margin-top: 2px; /* Reduce el margen superior */
    }
    .nombre {
      font-size: 12px;
      margin-bottom: 2px; /* Añade un margen inferior para separación */
    }
    #jugador1 { top: 225px; left: 50px; }
    #jugador2 { top: 100px; left: 200px; }
    #jugador3 { top: 350px; left: 200px; }
    #jugador4 { top: 100px; left: 450px; }
    #jugador5 { top: 350px; left: 450px; }
    #timer {
      text-align: center;
      font-size: 20px;
      margin-top: 10px;
    }
    #accionesJugador, #cambioJugador {
      display: none;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1 style="text-align: center;">Partido de Fútbol Sala</h1>
  
  <!-- Campo de fútbol sala -->
  <div id="campo">
    <div class="jugador" id="jugador1"></div>
    <div class="jugador" id="jugador2"></div>
    <div class="jugador" id="jugador3"></div>
    <div class="jugador" id="jugador4"></div>
    <div class="jugador" id="jugador5"></div>
  </div>

  <!-- Temporizador -->
  <div id="timer">Tiempo: 0s</div>

  <!-- Desplegable para jugadores convocados -->
  <div style="text-align: center; margin-top: 20px;">
    <label for="jugadoresConvocados">Jugadores Convocados: </label>
    <select id="jugadoresConvocados" multiple size="5"></select>
  </div>

  <!-- Botón para iniciar el partido -->
  <div style="text-align: center; margin-top: 20px;">
    <button id="iniciarPartido">Iniciar Partido</button>
  </div>

  <!-- Sección para realizar acciones sobre un jugador -->
  <div id="accionesJugador">
    <label for="selectAccion">Seleccionar acción para el jugador: </label>
    <select id="selectAccion">
      <option value="gol">Gol</option>
      <option value="asistencia">Asistencia</option>
      <option value="tarjeta">Tarjeta</option>
      <option value="cambio">Cambiar jugador</option>
    </select>
    <button id="confirmarAccion">Confirmar Acción</button>
  </div>

  <!-- Sección para realizar cambios de jugadores -->
  <div id="cambioJugador">
    <label for="selectBanquillo">Seleccionar jugador del banquillo: </label>
    <select id="selectBanquillo"></select>
    <button id="confirmarCambio">Confirmar Cambio</button>
  </div>

  <script>
    // Mock de jugadores con números
    const jugadoresConvocados = [
      { nombre: 'Aitor', numero: 1 },
      { nombre: 'Peru', numero: 21 },
      { nombre: 'Javi O.', numero: 7 },
      { nombre: 'Christian', numero: 11 },
      { nombre: 'Mini', numero: 3 },
      { nombre: 'Adrián', numero: 77 },
      { nombre: 'Mario', numero: 4 },
      { nombre: 'Javi R.', numero: 5 },
      { nombre: 'Raúl', numero: 12 },
      { nombre: 'Rubi', numero: 10 }
    ];

    let jugadoresEnCancha = jugadoresConvocados.slice(0, 5);  // Los primeros 5 en cancha
    let jugadoresEnBanquillo = jugadoresConvocados.slice(5); // El resto en el banquillo

    const jugadoresElements = document.querySelectorAll('.jugador');
    const selectConvocados = document.getElementById('jugadoresConvocados');
    const accionesJugadorDiv = document.getElementById('accionesJugador');
    const cambioJugadorDiv = document.getElementById('cambioJugador');
    const selectAccion = document.getElementById('selectAccion');
    const selectBanquillo = document.getElementById('selectBanquillo');
    let jugadorSeleccionadoParaAccion = null;
    let jugadorSeleccionadoParaCambio = null;

    // Función para actualizar los jugadores en la cancha visualmente
    function actualizarCancha() {
      jugadoresEnCancha.forEach((jugador, index) => {
        jugadoresElements[index].innerHTML = `
            <div class="nombre">${jugador.nombre}</div>
            <div class="numero">${jugador.numero}</div>
        `;
      });
    }

    // Cargar los jugadores convocados en el desplegable
    function cargarJugadoresConvocados() {
      selectConvocados.innerHTML = '';
      jugadoresConvocados.forEach(jugador => {
        const option = document.createElement('option');
        option.value = jugador.nombre;
        option.textContent = `${jugador.nombre} (#${jugador.numero})`;
        if (!jugadoresEnCancha.some(j => j.nombre === jugador.nombre)) {
          selectConvocados.appendChild(option);
        }
      });
    }

    // Cargar los jugadores disponibles en el banquillo en el desplegable
    function cargarBanquillo() {
      selectBanquillo.innerHTML = '';
      jugadoresEnBanquillo.forEach(jugador => {
        const option = document.createElement('option');
        option.value = jugador.nombre;
        option.textContent = `${jugador.nombre} (#${jugador.numero})`;
        selectBanquillo.appendChild(option);
      });
    }

    // Función para iniciar el temporizador
    let tiempo = 0;
    let temporizador;
    function iniciarTemporizador() {
      temporizador = setInterval(() => {
        tiempo++;
        document.getElementById('timer').textContent = `Tiempo: ${tiempo}s`;
      }, 1000);
    }

    // Añadir eventos de clic a los jugadores para seleccionar acción
    jugadoresElements.forEach(jugadorElement => {
      jugadorElement.addEventListener('click', () => {
        jugadorSeleccionadoParaAccion = jugadorElement;
        accionesJugadorDiv.style.display = 'block'; // Mostrar menú de acciones
      });
    });

    // Evento para confirmar la acción seleccionada
    document.getElementById('confirmarAccion').addEventListener('click', () => {
      const accionSeleccionada = selectAccion.value;
      if (jugadorSeleccionadoParaAccion && accionSeleccionada) {
        switch (accionSeleccionada) {
          case 'gol':
            console.log(`${jugadorSeleccionadoParaAccion.textContent} ha metido gol`)
            break;
          case 'asistencia':
            console.log(`${jugadorSeleccionadoParaAccion.textContent} ha dado asistencia`);
            break;
          case 'tarjeta':
            console.log(`${jugadorSeleccionadoParaAccion.textContent} ha recibido tarjeta`);
            break;
          case 'cambio':
            cambioJugadorDiv.style.display = 'block';
            jugadorSeleccionadoParaCambio = jugadorSeleccionadoParaAccion;
            cargarBanquillo();
            break;
        }
        accionesJugadorDiv.style.display = 'none';
      }
    });

    // Evento para confirmar el cambio de jugador
    document.getElementById('confirmarCambio').addEventListener('click', () => {
        const jugadorSeleccionado = selectBanquillo.value;

        if (jugadorSeleccionadoParaCambio && jugadorSeleccionado) {
            // Obtener el nombre del jugador seleccionado para el cambio
            const nombreJugadorEnCancha = jugadorSeleccionadoParaCambio.querySelector('.nombre').textContent.trim(); // Obtener el nombre del jugador en cancha

            // Comprobar si el jugador en cancha está en la lista
            const index = jugadoresEnCancha.findIndex(j => j.nombre.toLowerCase() === nombreJugadorEnCancha.toLowerCase()); // Verificar si el jugador está en cancha

            if (index !== -1) { // Asegúrate de que el jugador está en cancha
                const jugadorEnCancha = jugadoresEnCancha[index];
                const nuevoJugador = jugadoresConvocados.find(j => j.nombre === jugadorSeleccionado);

                // Hacer el cambio
                if (nuevoJugador) {
                    jugadoresEnCancha[index] = nuevoJugador; // Reemplazar jugador en cancha
                    jugadoresEnBanquillo = jugadoresEnBanquillo.filter(j => j.nombre !== nuevoJugador.nombre); // Eliminar del banquillo
                    jugadoresEnBanquillo.push(jugadorEnCancha); // Añadir el jugador que salió al banquillo

                    actualizarCancha();
                    cargarJugadoresConvocados();
                    cargarBanquillo();
                    cambioJugadorDiv.style.display = 'none';
                    console.log(`${jugadorEnCancha.nombre} ha sido reemplazado por ${nuevoJugador.nombre}.`);
                }
            } else {
                console.error("El jugador seleccionado para el cambio no está en cancha.");
            }
        }
    });

    // Cargar los jugadores en la cancha y el desplegable al cargar la página
    window.onload = function() {
      actualizarCancha();
      cargarJugadoresConvocados();
    }
  </script>

</body>
</html>
